### Objetivo:

![[Pasted image 20240504124319.png]]


Pasos:

Paso #1:
Creamos un exploit y tambien creare un shell nada mas para luego ver EL PORQUE se produjo el fallo por detras de la carga de ese archivo (para aprender donde esta ese error de código).

![[Pasted image 20240504124917.png]]

Paso #2:
Intentamos subir nuestro exploit.php normalmente y como vemos no hay ninguna validacion en la subida de tipo de archivos.

![[Pasted image 20240504125029.png]]


Paso #3:
Ahora intentare cargar el exploit.php para ejecutarlo. Y como podemos ver NO me lo interpreta, solamente me muestra el código fuente del archivo.

![[Pasted image 20240504125528.png]]

Y sucede por esto:
![[Pasted image 20240504125643.png]]

![[Pasted image 20240504125714.png]]

Luego de ver esto intentaremos subir el exploit.php en una ruta que no sea **/files/avatars/exploit.php** a ver que pasa metiendole un **path traversal** y como pudimos ver su subio en **avatars/shell.php** que al parecer es la misma ruta... Como que algo no funciono.

![[Pasted image 20240504130047.png]]

Probaremos url encodear el **"/"** y como vemos ahi si subio en **avatars/../shell.php**

![[Pasted image 20240504130538.png]]

Ahora probaremos cargarlo de nuevo nuestro **exploit.php o shell.php**

![[Pasted image 20240504130804.png]]

Como vemos ahora ya no se encuentra dentro de **/files/avatars/comando** si no que al aplicarle el **../** ahora se encuentra en **/files**.

Bien, como vemos yo subi un shell.php pero ahora subire el exploit.php solo para extraer la flag.

![[Pasted image 20240504131209.png]]
 

Ahora bien, para tener un mejor panorama **DEL PORQUE** se produjo este fallo, veremos el codigo fuente del archivo que se encarga de la subida de archivos y veremos en que parte del codigo se encuentra el fallo.

![[Pasted image 20240504131712.png]]
